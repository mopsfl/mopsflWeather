function h(i,t){navigator.geolocation.getCurrentPosition(i,t,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}var c=class{constructor(t="http://localhost:6969/api/v1/",e="https://mopsflgithubio.mopsfl.repl.co/api/mopsflweather/",s="http://prem.daki.cc:6082/api/v1/data/"){this.API_URL_DEV=t,this.API_URL_HTTPS=e,this.API_URL_HTTP=s}async GetCurrentWeather(t=!0,e=!1){let s=document.querySelector(".weather_data_loading");s.classList.remove("hide");let a=await fetch((t?this.API_URL_HTTPS:e?this.API_URL_DEV+"data/":this.API_URL_HTTP)+"currentweather").then(n=>n.json());return s.classList.add("hide"),a}async SearchCity(t,e=!0,s=!1){let a=document.querySelector(".weather_data_loading");a.classList.remove("hide");let n=await fetch((e?this.API_URL_HTTPS:s?this.API_URL_DEV+"data/":this.API_URL_HTTP)+`searchcity?name=${t}`).then(r=>r.json());return a.classList.add("hide"),n}};var l=class{constructor(t={static:"./svg/static/",animated:"./svg/animated/"}){this._PATHS=t}CreateWeatherIcon(t,e,s="medium",a){let n=e?this._PATHS.animated:this._PATHS.static,r=document.createElement("img");return r.src=`${n}${t}.svg`,r.classList.add(`icon-${s}`),a&&a.appendChild(r),r}};var u=class{constructor(t){this.Config=t}ToggleResults(t){if(!this.Config.location_search_results)return console.warn("Missing 'location_search_results' element.");if(!this.Config.location_search_input)return console.warn("Missing 'location_search_input' element.");t==null?(this.Config.location_search_input.classList.toggle("results_visible"),this.Config.location_search_results.classList.toggle("hide_location_search_results")):t==!0?(this.Config.location_search_input.classList.add("results_visible"),this.Config.location_search_results.classList.remove("hide_location_search_results")):t==!1&&(this.Config.location_search_input.classList.remove("results_visible"),this.Config.location_search_results.classList.add("hide_location_search_results"))}UpdateResults(t){if(!this.Config.location_search_result_template)return console.warn("Missing 'location_search_result_template' element.");this.Config.location_search_results.innerHTML="",t.forEach(e=>{let s=this.Config.location_search_result_template.content.cloneNode(!0).childNodes[1];s.setAttribute("city-id",e.id),s.setAttribute("city-name",e.city_ascii),s.classList.add("location_search_result_animate"),s.querySelector(".location_search_result_cityname").innerText=`${e.city} - ${e.iso2}`,this.Config.location_search_results.appendChild(s),window.ripple.registerRipples()})}};var d=!1,g=!0,f=new c,E=new l,o=new u({location_search_results:document.querySelector(".location_search_results"),location_search_input:document.querySelector(".location_search_input"),location_search_result_template:document.querySelector(".location_search_result_template")});h(p,m);function p(i){window.coords=i.coords}function m(i){throw i}d&&console.warn("App running on DEV_MODE");var L=await f.GetCurrentWeather(g,d),_=document.querySelector(".location_search_input");window.currentWeather=L;_.addEventListener("input",async i=>{if(!i.target.validity.valid&&i.target.validity.valueMissing||i.target.value.replace(/\s/g,"").length<=0)return o.ToggleResults(!1);let e=await f.SearchCity(i.target.value.trim(),g,d);e.length>0?(o.ToggleResults(!0),o.UpdateResults(e)):o.ToggleResults(!1)});_.addEventListener("focus",()=>{_.validity.valid&&o.ToggleResults(!0)});_.addEventListener("focusout",()=>{_.validity.valid||o.ToggleResults(!1)});
